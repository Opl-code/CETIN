<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JSON to CSV Converter</title>
</head>
<body>
  <h1>JSON to CSV Converter</h1>
  <textarea id="jsonInput" rows="15" cols="80" placeholder="Paste your JSON here..."></textarea><br>
  <button onclick="convertToCSV()">Convert to CSV</button>
  <br><br>
  <a id="downloadLink" style="display:none;">Download CSV</a>

  <script>
    function convertToCSV() {
      let input = document.getElementById('jsonInput').value;
      let data;
      try {
        data = JSON.parse(input);
      } catch (e) {
        alert("Invalid JSON!");
        return;
      }

      let grouped = {};
      for (let item of data) {
        let a = item["ID(a)"];
        let b = item["ID(b)"];
        if (!grouped[a]) grouped[a] = [];
        grouped[a].push(b);
      }

      let csvRows = [["ID(a);ID(b)"]];
      for (let a in grouped) {
        csvRows.push([`${a};${grouped[a].join(",")}`]);
      }

      let csvContent = csvRows.map(e => e.join("")).join("\n");
      let blob = new Blob([csvContent], { type: 'text/csv' });
      let url = URL.createObjectURL(blob);

      let downloadLink = document.getElementById('downloadLink');
      downloadLink.href = url;
      downloadLink.download = "output.csv";
      downloadLink.style.display = "inline";
      downloadLink.textContent = "Download CSV";
    }
  </script>
</body>
</html>
